var types={},typesToString=types.toString,buildInList=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Promise","Generator","GeneratorFunction","ArrayBuffer","DataView"],typedArrays=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],maps=["Map","WeakMap"],sets=["Set","WeakSet"];function getInternalType(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?types[typesToString.call(t)]||"object":typeof t}buildInList.forEach(function(t){types["[object "+t+"]"]=t.toLowerCase();}),maps.forEach(function(t){types["[object "+t+"]"]="map";}),sets.forEach(function(t){types["[object "+t+"]"]="set";}),typedArrays.forEach(function(t){types["[object "+t+"]"]="typedarray";});

var refs=[],counter=0;function fillNativeFunctions(e,n,t,r){ void 0===r&&(r=true);for(var c=r?".prototype.":".",o=0,a=Object.getOwnPropertyNames(r?n.prototype:n);o<a.length;o++){var i=a[o];["caller","callee","arguments"].indexOf(i)<0&&(e["".concat(t).concat(c).concat(i)]=r?n.prototype[i]:n[i]);}}var nativeFunctions=function(){var e={};return fillNativeFunctions(e,Array,"Array",false),fillNativeFunctions(e,Array,"Array"),fillNativeFunctions(e,JSON,"JSON",false),fillNativeFunctions(e,Object,"Object",false),fillNativeFunctions(e,Object,"Object"),fillNativeFunctions(e,Function,"Function",false),fillNativeFunctions(e,Function,"Function"),fillNativeFunctions(e,Date,"Date",false),fillNativeFunctions(e,String,"String"),e.Function=Function,e}();function numberToString(e){if(Number.isNaN(e))return "Number.NaN";switch(e){case Number.POSITIVE_INFINITY:return "Number.POSITIVE_INFINITY";case Number.NEGATIVE_INFINITY:return "Number.NEGATIVE_INFINITY";case Number.EPSILON:return "Number.EPSILON";case Number.MAX_SAFE_INTEGER:return "Number.MAX_SAFE_INTEGER";case Number.MIN_SAFE_INTEGER:return "Number.MIN_SAFE_INTEGER";case Number.MAX_VALUE:return "Number.MAX_VALUE";case Number.MIN_VALUE:return "Number.MIN_VALUE";case Math.PI:return "Math.PI";case Math.E:return "Math.E";case Math.LN10:return "Math.LN10";case Math.LN2:return "Math.LN2";case Math.LOG10E:return "Math.LOG10E";case Math.LOG2E:return "Math.LOG2E";case Math.SQRT1_2:return "Math.SQRT1_2";case Math.SQRT2:return "Math.SQRT2";default:return String(e)}}function symbolToString(e){switch(e){case Symbol.asyncIterator:case Symbol.hasInstance:case Symbol.isConcatSpreadable:case Symbol.iterator:case Symbol.match:case Symbol.prototype:case Symbol.replace:case Symbol.search:case Symbol.species:case Symbol.split:case Symbol.toPrimitive:case Symbol.toStringTag:case Symbol.unscopables:return e.description;default:var n=e.description?'"'.concat(e.description,'"'):"";return "Symbol(".concat(n,")")}}function dateToString(e){return isNaN(e.getTime())?"new Date(".concat(e.toString(),")"):"new Date(".concat(e.toISOString(),")")}function errorToString(e){var n=JSON.stringify(e.message),t=JSON.stringify(e.fileName),r=JSON.stringify(e.lineNumber);return "new Error(".concat(n,", ").concat(t,", ").concat(r,")")}function arrayToString(e,n,t){if(0===e.length)return "[]";var r=e.reduce(function(e,r,c){t.references.push(c.toString());var o=e?"".concat(e,", "):"";return o+=stringifyRef(r,n,t),t.references.pop(),o},"");return attachActions(getLocalRefs(e),"[".concat(r,"]"))}function getLocalRefs(e){return refs.filter(function(n){return n.source===e})}function attachActions(e,n){if(e.length>0){counter=counter++%Number.MAX_SAFE_INTEGER;var t="___j2s_".concat(counter),r=e.reduce(function(e,n){var r=converToAction(t,n);return refs.splice(refs.indexOf(n),1),e+r},"");return "(function(){ var ".concat(t," = ").concat(n,"; ").concat(r," return ").concat(t,"; }())")}return n}function converToAction(e,n){var t=n.historyRef.indexOf(n.source);if(t<0)return "";for(var r,c=n.historyRef.slice(t),o="",a=0;a<c.length;a++){var i=c[a];if(i===n.source)o=e,r=n.source;else if("string"==typeof i)o+="['".concat(i.replace(/'/gi,"\\'"),"']"),r=r[i];else if(i!==r)return ""}return "".concat(o," = ").concat(e,"; ")}function typedArrayToString(e,n,t){var r=arrayToString(Array.from(e),n,t),c=e.constructor.name;return "new ".concat(c,"(").concat(r,")")}function setToString(e,n,t){var r=[];return e.forEach(function(e,c,o){r.push(stringifyRef(c,n,t));}),0===r.length?"new Set()":"new Set([".concat(r.join(", "),"])")}function mapToString(e,n,t){var r=[];return e.forEach(function(e,c){r.push("[".concat(stringifyRef(c,n,t),", ").concat(stringifyRef(e,n,t),"]"));}),0===r.length?"new Map()":"new Map([".concat(r.join(", "),"])")}function objectToString(e,n,t){var r=[];for(var c in e)if(e.hasOwnProperty(c)){t.references.push(c);var o=stringifyRef(e[c],n,t);t.references.pop(),"undefined"!==o&&(/^[a-zA-Z]+$/.test(c)||(c='"'.concat(c,'"')),r.push("".concat(c,": ").concat(o)));}return 0===r.length?"{}":attachActions(getLocalRefs(e),"{\n".concat(r.join(",\n"),"\n}"))}function functionPropertiesToString(e,n,t,r){var c="";for(var o in n)if(n.hasOwnProperty(o)){r.references.push(o);var a=stringifyRef(n[o],t,r);r.references.pop(),"undefined"!==a&&(c+="".concat(e,".").concat(o," = ").concat(a,";\n"));}return c}function functionToString(e,n,t){var r=e.name||"anonymousFunction",c=n.includeFunctionProperties?functionPropertiesToString(r,e,n,t):"";t.references.push("prototype");var o=n.includeFunctionPrototype?functionPropertiesToString("".concat(r,".prototype"),e.prototype,n,t):"";t.references.pop();var a=String(e);if(a.indexOf("[native code]")>-1&&a.length<100)for(var i in nativeFunctions)nativeFunctions[i]===e&&(a=i);return c||o?attachActions(getLocalRefs(e),"(function(){\n var ".concat(r," = ").concat(String(a),";\n ").concat(c,"\n ").concat(o,"\n return ").concat(r,";\n}())")):a}function arrayBufferToString(e,n,t){if(!n.includeBuffers)return "undefined";var r=typedArrayToString(new Int8Array(e),n,t);return "(".concat(r,").buffer")}function dataViewToString(e,n,t){if(!n.includeBuffers)return "undefined";var r=arrayBufferToString(e.buffer,n,t);return "new DataView(".concat(r,", ").concat(e.byteOffset,", ").concat(e.byteLength,")")}function stringify(e,n,t){switch(getInternalType(e)){case "undefined":case "promise":case "generator":return "undefined";case "null":return "null";case "boolean":case "regexp":return String(e);case "string":default:return JSON.stringify(e);case "number":return numberToString(e);case "bigint":return "BigInt(".concat(e,")");case "symbol":return symbolToString(e);case "date":return dateToString(e);case "error":return errorToString(e);case "array":return arrayToString(e,n,t);case "typedarray":return typedArrayToString(e,n,t);case "set":return setToString(e,n,t);case "map":return mapToString(e,n,t);case "object":return objectToString(e,n,t);case "function":case "generatorfunction":return functionToString(e,n,t);case "arraybuffer":return arrayBufferToString(e,n,t);case "dataview":return dataViewToString(e,n,t)}}function stringifyRef(e,n,t){var r=t.references.indexOf(e);if(r<0||"string"==typeof t.references[r]){var c=getInternalType(e),o=t.references.length;switch(t.references.push(e),c){case "object":if(t.nestedObjectsLeft<=0)return "undefined";t.nestedObjectsLeft--;break;case "array":case "typedarray":if(t.nestedArraysLeft<=0)return "undefined";t.nestedArraysLeft--;break;case "function":case "generatorfunction":if(t.nestedFunctionsLeft<=0)return "undefined";t.nestedFunctionsLeft--;}var a=stringify(e,n,t);switch(t.references.splice(o),c){case "object":t.nestedObjectsLeft++;break;case "array":case "typedarray":t.nestedArraysLeft++;break;case "function":case "generatorfunction":t.nestedFunctionsLeft++;}return a}return refs.push({historyRef:t.references.slice(0),source:e}),"null"}function javaScriptToString(e,n){var t={includeFunctionProperties:void 0===(n=n||{}).includeFunctionProperties||n.includeFunctionProperties,includeFunctionPrototype:void 0===n.includeFunctionPrototype||n.includeFunctionPrototype,includeBuffers:void 0===n.includeBuffers||n.includeBuffers,nestedObjectsAmount:void 0===n.nestedObjectsAmount?Number.POSITIVE_INFINITY:n.nestedObjectsAmount,nestedArraysAmount:void 0===n.nestedArraysAmount?Number.POSITIVE_INFINITY:n.nestedArraysAmount,nestedFunctionsAmount:void 0===n.nestedFunctionsAmount?Number.POSITIVE_INFINITY:n.nestedFunctionsAmount};refs=[],counter=0;var r=stringify(e,t,{references:[e],nestedObjectsLeft:t.nestedObjectsAmount,nestedArraysLeft:t.nestedArraysAmount,nestedFunctionsLeft:t.nestedFunctionsAmount});return attachActions(getLocalRefs(e),r)}

export { javaScriptToString as default };
//# sourceMappingURL=javascripttostring.es5.js.map

{"version":3,"file":"javascripttostring.umd.js","sources":["../src/javascripttostring.ts"],"sourcesContent":["import getObjectType from \"@lopatnov/get-internal-type\";\r\n\r\nexport interface IJ2SOptions {\r\n  includeFunctionProperties?: boolean; // default true\r\n  includeFunctionPrototype?: boolean; // default true\r\n  includeBuffers?: boolean; // default true\r\n  nestedObjectsAmount?: number; // default Number.POSITIVE_INFINITY\r\n  nestedArraysAmount?: number; // default Number.POSITIVE_INFINITY\r\n  nestedFunctionsAmount?: number; // default Number.POSITIVE_INFINITY\r\n}\r\n\r\ninterface RefInstance {\r\n  historyRef: Array<any>,\r\n  source: any\r\n}\r\n\r\nvar refs: RefInstance[] = [];\r\nvar counter = 0;\r\n\r\ninterface IJ2SHistory {\r\n  references: any[];\r\n  nestedObjectsLeft: number;\r\n  nestedArraysLeft: number;\r\n  nestedFunctionsLeft: number;\r\n}\r\n\r\nfunction numberToString(value: number): string {\r\n  if (Number.isNaN(value)) {\r\n    return \"Number.NaN\";\r\n  }\r\n  switch (value) {\r\n    case Number.POSITIVE_INFINITY:\r\n      return \"Number.POSITIVE_INFINITY\";\r\n    case Number.NEGATIVE_INFINITY:\r\n      return \"Number.NEGATIVE_INFINITY\";\r\n    case Number.EPSILON:\r\n      return \"Number.EPSILON\";\r\n    case Number.MAX_SAFE_INTEGER:\r\n      return \"Number.MAX_SAFE_INTEGER\";\r\n    case Number.MIN_SAFE_INTEGER:\r\n      return \"Number.MIN_SAFE_INTEGER\";\r\n    case Number.MAX_VALUE:\r\n      return \"Number.MAX_VALUE\";\r\n    case Number.MIN_VALUE:\r\n      return \"Number.MIN_VALUE\";\r\n    case Math.PI:\r\n      return \"Math.PI\";\r\n    case Math.E:\r\n      return \"Math.E\";\r\n    case Math.LN10:\r\n      return \"Math.LN10\";\r\n    case Math.LN2:\r\n      return \"Math.LN2\";\r\n    case Math.LOG10E:\r\n      return \"Math.LOG10E\";\r\n    case Math.LOG2E:\r\n      return \"Math.LOG2E\";\r\n    case Math.SQRT1_2:\r\n      return \"Math.SQRT1_2\";\r\n    case Math.SQRT2:\r\n      return \"Math.SQRT2\";\r\n    default:\r\n      return String(value);\r\n  }\r\n}\r\n\r\nfunction symbolToString(value: any): string {\r\n  switch (value) {\r\n    case Symbol.asyncIterator:\r\n    case Symbol.hasInstance:\r\n    case Symbol.isConcatSpreadable:\r\n    case Symbol.iterator:\r\n    case Symbol.match:\r\n    case Symbol.prototype:\r\n    case Symbol.replace:\r\n    case Symbol.search:\r\n    case Symbol.species:\r\n    case Symbol.split:\r\n    case Symbol.toPrimitive:\r\n    case Symbol.toStringTag:\r\n    case Symbol.unscopables:\r\n      return value.description;\r\n    default:\r\n      let description = value.description ? `\"${value.description}\"` : \"\";\r\n      return `Symbol(${description})`;\r\n  }\r\n}\r\n\r\nfunction dateToString(value: Date): string {\r\n  if (isNaN(value.getTime())) {\r\n    return `new Date(${value.toString()})`;\r\n  }\r\n  return `new Date(${value.toISOString()})`;\r\n}\r\n\r\nfunction errorToString(value: any): string {\r\n  let message = JSON.stringify(value.message),\r\n    fileName = JSON.stringify(value.fileName),\r\n    lineNumber = JSON.stringify(value.lineNumber);\r\n  return `new Error(${message}, ${fileName}, ${lineNumber})`;\r\n}\r\n\r\nfunction arrayToString(\r\n  value: Array<any>,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  if (value.length === 0) return \"[]\";\r\n  let arrayValues = value.reduce(\r\n    (x1: any, x2: any, index: number) => {\r\n      history.references.push(index.toString());\r\n      let str = !!x1 ? `${x1}, ` : '';\r\n      str += stringifyRef(x2,options,history);\r\n      history.references.pop();\r\n      return str;\r\n    }, '');\r\n  return attachActions(getLocalRefs(value), `[${arrayValues}]`);\r\n}\r\n\r\nfunction getLocalRefs(value: any) {\r\n  return refs.filter(x => x.source === value)\r\n}\r\n\r\nfunction attachActions(localRefs: RefInstance[], result: string) {\r\n  if (localRefs.length > 0) {\r\n    counter = (counter++) % Number.MAX_SAFE_INTEGER;\r\n    const localName = `___j2s_${counter}`;\r\n    const actions = localRefs.reduce((x1: string, x2: RefInstance) => {\r\n      const action = converToAction(localName, x2);\r\n      refs.splice(refs.indexOf(x2), 1);\r\n      return x1 + action;\r\n    }, '');\r\n    return `(function(){ var ${localName} = ${result}; ${actions} return ${localName}; }())`;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction converToAction(localName: string, r: RefInstance) {\r\n  const destIndex = r.historyRef.indexOf(r.source);\r\n  if (destIndex < 0) {\r\n    return '';\r\n  }\r\n\r\n  const dest = r.historyRef.slice(destIndex);\r\n  let sourceObj: any;\r\n  let path = '';\r\n  for (let i = 0; i < dest.length; i++) {\r\n    const destObj = dest[i];\r\n    if (destObj === r.source) {\r\n      path = localName;\r\n      sourceObj = r.source;\r\n    } else if (typeof destObj === 'string') {\r\n      path += `['${destObj.replace(/'/gi, '\\\\\\'')}']`;\r\n      sourceObj = sourceObj[destObj];\r\n    } else if (destObj !== sourceObj) {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  return `${path} = ${localName}; `;\r\n}\r\n\r\nfunction typedArrayToString(\r\n  value: any,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  let arr = Array.from(value),\r\n    arrString = arrayToString(arr, options, history),\r\n    constructorName = value.constructor.name;\r\n  return `new ${constructorName}(${arrString})`;\r\n}\r\n\r\nfunction setToString(\r\n  value: Set<any>,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  let setValues: string[] = [];\r\n\r\n  value.forEach((value1: any, value2: any, set: Set<any>) => {\r\n    setValues.push(stringifyRef(value2, options, history));\r\n  });\r\n\r\n  if (setValues.length === 0) return \"new Set()\";\r\n\r\n  return `new Set([${setValues.join(\", \")}])`;\r\n}\r\n\r\nfunction mapToString(\r\n  value: Map<any, any>,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  let mapValues: string[] = [];\r\n\r\n  value.forEach((indexValue: any, key: any) => {\r\n    mapValues.push(\r\n      `[${stringifyRef(key, options, history)}, ${stringifyRef(\r\n        indexValue,\r\n        options,\r\n        history\r\n      )}]`\r\n    );\r\n  });\r\n\r\n  if (mapValues.length === 0) return \"new Map()\";\r\n\r\n  return `new Map([${mapValues.join(\", \")}])`;\r\n}\r\n\r\nfunction objectToString(\r\n  value: any,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  let objectValues = [];\r\n\r\n  for (let propertyName in value) {\r\n    if (value.hasOwnProperty(propertyName)) {\r\n      history.references.push(propertyName);\r\n      let propertyValue = stringifyRef(value[propertyName], options, history);\r\n      history.references.pop();\r\n      if (propertyValue !== \"undefined\") {\r\n        objectValues.push(`${propertyName}: ${propertyValue}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (objectValues.length === 0) return \"{}\";\r\n\r\n  return attachActions(getLocalRefs(value), `{\\n${objectValues.join(\",\\n\")}\\n}`);\r\n}\r\n\r\nfunction functionPropertiesToString(\r\n  functionName: string,\r\n  value: any,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  let result = \"\";\r\n  for (let propertyName in value) {\r\n    if (value.hasOwnProperty(propertyName)) {\r\n      history.references.push(propertyName);\r\n      let propertyValue = stringifyRef(value[propertyName], options, history);\r\n      history.references.pop();\r\n      if (propertyValue !== \"undefined\") {\r\n        result += `${functionName}.${propertyName} = ${propertyValue};\\n`;\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction functionToString(\r\n  value: any,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  let functionName = value.name || \"anonymousFunction\";\r\n  let functionObject = options.includeFunctionProperties\r\n    ? functionPropertiesToString(functionName, value, options, history)\r\n    : \"\";\r\n  history.references.push('prototype');\r\n  let functionPrototype = options.includeFunctionPrototype\r\n    ? functionPropertiesToString(\r\n        `${functionName}.prototype`,\r\n        value.prototype,\r\n        options,\r\n        history\r\n      )\r\n    : \"\";\r\n  history.references.pop();\r\n\r\n  if (!functionObject && !functionPrototype) {\r\n    return String(value);\r\n  }\r\n\r\n  return attachActions(getLocalRefs(value), `(function(){\\n var ${functionName} = ${String(\r\n    value\r\n  )};\\n ${functionObject}\\n ${functionPrototype}\\n return ${functionName};\\n}())`);\r\n}\r\n\r\nfunction arrayBufferToString(\r\n  value: ArrayBuffer,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  if (!options.includeBuffers) return \"undefined\";\r\n  let str = typedArrayToString(new Int8Array(value), options, history);\r\n  return `(${str}).buffer`;\r\n}\r\n\r\nfunction dataViewToString(\r\n  value: DataView,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  if (!options.includeBuffers) return \"undefined\";\r\n  let bufString = arrayBufferToString(value.buffer, options, history);\r\n  return `new DataView(${bufString}, ${value.byteOffset}, ${value.byteLength})`;\r\n}\r\n\r\n/**\r\n * Converts to string the value, if it wasn't before\r\n * @param value the value, that converts to string\r\n * @param references the references to stringified objects\r\n */\r\nfunction stringify(\r\n  value: any,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  switch (getObjectType(value)) {\r\n    case \"undefined\":\r\n      return \"undefined\";\r\n    case \"null\":\r\n      return \"null\";\r\n    case \"boolean\":\r\n      return String(value);\r\n    case \"regexp\":\r\n      return String(value);\r\n    case \"string\":\r\n      return JSON.stringify(value);\r\n    case \"number\":\r\n      return numberToString(value);\r\n    case \"bigint\":\r\n      return `BigInt(${value})`;\r\n    case \"symbol\":\r\n      return symbolToString(value);\r\n    case \"date\":\r\n      return dateToString(value);\r\n    case \"error\":\r\n      return errorToString(value);\r\n    case \"array\":\r\n      return arrayToString(value, options, history);\r\n    case \"typedarray\":\r\n      return typedArrayToString(value, options, history);\r\n    case \"set\":\r\n      return setToString(value, options, history);\r\n    case \"map\":\r\n      return mapToString(value, options, history);\r\n    case \"object\":\r\n      return objectToString(value, options, history);\r\n    case \"function\":\r\n    case \"generatorfunction\":\r\n      return functionToString(value, options, history);\r\n    case \"arraybuffer\":\r\n      return arrayBufferToString(value, options, history);\r\n    case \"dataview\":\r\n      return dataViewToString(value, options, history);\r\n    case \"promise\":\r\n    case \"generator\":\r\n      return \"undefined\";\r\n    default:\r\n      return JSON.stringify(value);\r\n  }\r\n}\r\n\r\n/**\r\n * Stringify the value, if it wasn't before\r\n * @param value the value, that converts to string\r\n * @param references the references to stringified objects\r\n */\r\nfunction stringifyRef(\r\n  value: any,\r\n  options: IJ2SOptions,\r\n  history: IJ2SHistory\r\n): string {\r\n  const index = history.references.indexOf(value);\r\n  if (index < 0 || typeof(history.references[index]) === 'string') {\r\n    let objectType = getObjectType(value);\r\n    let referencesLength = history.references.length;\r\n    history.references.push(value);\r\n    switch (objectType) {\r\n      case \"object\":\r\n        if (history.nestedObjectsLeft <= 0) return \"undefined\";\r\n        history.nestedObjectsLeft--;\r\n        break;\r\n      case \"array\":\r\n      case \"typedarray\":\r\n        if (history.nestedArraysLeft <= 0) return \"undefined\";\r\n        history.nestedArraysLeft--;\r\n        break;\r\n      case \"function\":\r\n      case \"generatorfunction\":\r\n        if (history.nestedFunctionsLeft <= 0) return \"undefined\";\r\n        history.nestedFunctionsLeft--;\r\n        break;\r\n    }\r\n\r\n    let refString = stringify(value, options, history);\r\n\r\n    history.references.splice(referencesLength);\r\n    switch (objectType) {\r\n      case \"object\":\r\n        history.nestedObjectsLeft++;\r\n        break;\r\n      case \"array\":\r\n      case \"typedarray\":\r\n        history.nestedArraysLeft++;\r\n        break;\r\n      case \"function\":\r\n      case \"generatorfunction\":\r\n        history.nestedFunctionsLeft++;\r\n        break;\r\n    }\r\n\r\n    return refString;\r\n  } else {\r\n    refs.push({\r\n      historyRef: history.references.slice(0),\r\n      source: value\r\n    })\r\n  }\r\n  return \"null\";\r\n}\r\n\r\n/**\r\n * Converts JavaScript value to string\r\n * @param value the value of any type\r\n * @param options [optional] The options of conversion\r\n */\r\nfunction javaScriptToString(value: any, options?: IJ2SOptions): string {\r\n  options = options || {};\r\n  let concreteOptions: IJ2SOptions = {\r\n    includeFunctionProperties:\r\n      options.includeFunctionProperties === undefined\r\n        ? true\r\n        : options.includeFunctionProperties,\r\n    includeFunctionPrototype:\r\n      options.includeFunctionPrototype === undefined\r\n        ? true\r\n        : options.includeFunctionPrototype,\r\n    includeBuffers:\r\n      options.includeBuffers === undefined ? true : options.includeBuffers,\r\n    nestedObjectsAmount:\r\n      options.nestedObjectsAmount === undefined\r\n        ? Number.POSITIVE_INFINITY\r\n        : options.nestedObjectsAmount,\r\n    nestedArraysAmount:\r\n      options.nestedArraysAmount === undefined\r\n        ? Number.POSITIVE_INFINITY\r\n        : options.nestedArraysAmount,\r\n    nestedFunctionsAmount:\r\n      options.nestedFunctionsAmount === undefined\r\n        ? Number.POSITIVE_INFINITY\r\n        : options.nestedFunctionsAmount\r\n  };\r\n\r\n  return stringify(value, concreteOptions, {\r\n    references: [value],\r\n    nestedObjectsLeft: concreteOptions.nestedObjectsAmount as number,\r\n    nestedArraysLeft: concreteOptions.nestedArraysAmount as number,\r\n    nestedFunctionsLeft: concreteOptions.nestedFunctionsAmount as number\r\n  });\r\n}\r\n\r\nexport default javaScriptToString;\r\n"],"names":["getObjectType"],"mappings":"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"}
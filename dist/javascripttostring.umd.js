(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.javaScriptToString = factory());
})(this, (function () { 'use strict';

    var types={},typesToString=types.toString,buildInList=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Promise","Generator","GeneratorFunction","ArrayBuffer","DataView"],typedArrays=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],maps=["Map","WeakMap"],sets=["Set","WeakSet"];function getInternalType(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?types[typesToString.call(t)]||"object":typeof t}buildInList.forEach((function(t){types["[object "+t+"]"]=t.toLowerCase();})),maps.forEach((function(t){types["[object "+t+"]"]="map";})),sets.forEach((function(t){types["[object "+t+"]"]="set";})),typedArrays.forEach((function(t){types["[object "+t+"]"]="typedarray";}));

    var refs=[],counter=0;function fillNativeFunctions(e,r,n,t){void 0===t&&(t=!0);for(var i=t?".prototype.":".",o=0,a=Object.getOwnPropertyNames(t?r.prototype:r);o<a.length;o++){var u=a[o];["caller","callee","arguments"].indexOf(u)<0&&(e[""+n+i+u]=t?r.prototype[u]:r[u]);}}var nativeFunctions=function(){var e={};return fillNativeFunctions(e,Array,"Array",!1),fillNativeFunctions(e,Array,"Array"),fillNativeFunctions(e,JSON,"JSON",!1),fillNativeFunctions(e,Object,"Object",!1),fillNativeFunctions(e,Object,"Object"),fillNativeFunctions(e,Function,"Function",!1),fillNativeFunctions(e,Function,"Function"),fillNativeFunctions(e,Date,"Date",!1),fillNativeFunctions(e,String,"String"),e.Function=Function,e}();function numberToString(e){if(Number.isNaN(e))return "Number.NaN";switch(e){case Number.POSITIVE_INFINITY:return "Number.POSITIVE_INFINITY";case Number.NEGATIVE_INFINITY:return "Number.NEGATIVE_INFINITY";case Number.EPSILON:return "Number.EPSILON";case Number.MAX_SAFE_INTEGER:return "Number.MAX_SAFE_INTEGER";case Number.MIN_SAFE_INTEGER:return "Number.MIN_SAFE_INTEGER";case Number.MAX_VALUE:return "Number.MAX_VALUE";case Number.MIN_VALUE:return "Number.MIN_VALUE";case Math.PI:return "Math.PI";case Math.E:return "Math.E";case Math.LN10:return "Math.LN10";case Math.LN2:return "Math.LN2";case Math.LOG10E:return "Math.LOG10E";case Math.LOG2E:return "Math.LOG2E";case Math.SQRT1_2:return "Math.SQRT1_2";case Math.SQRT2:return "Math.SQRT2";default:return String(e)}}function symbolToString(e){switch(e){case Symbol.asyncIterator:case Symbol.hasInstance:case Symbol.isConcatSpreadable:case Symbol.iterator:case Symbol.match:case Symbol.prototype:case Symbol.replace:case Symbol.search:case Symbol.species:case Symbol.split:case Symbol.toPrimitive:case Symbol.toStringTag:case Symbol.unscopables:return e.description;default:return "Symbol("+(e.description?'"'+e.description+'"':"")+")"}}function dateToString(e){return isNaN(e.getTime())?"new Date("+e.toString()+")":"new Date("+e.toISOString()+")"}function errorToString(e){return "new Error("+JSON.stringify(e.message)+", "+JSON.stringify(e.fileName)+", "+JSON.stringify(e.lineNumber)+")"}function arrayToString(e,r,n){if(0===e.length)return "[]";var t=e.reduce((function(e,t,i){n.references.push(i.toString());var o=e?e+", ":"";return o+=stringifyRef(t,r,n),n.references.pop(),o}),"");return attachActions(getLocalRefs(e),"["+t+"]")}function getLocalRefs(e){return refs.filter((function(r){return r.source===e}))}function attachActions(e,r){if(e.length>0){var n="___j2s_"+(counter=counter++%Number.MAX_SAFE_INTEGER),t=e.reduce((function(e,r){var t=converToAction(n,r);return refs.splice(refs.indexOf(r),1),e+t}),"");return "(function(){ var "+n+" = "+r+"; "+t+" return "+n+"; }())"}return r}function converToAction(e,r){var n=r.historyRef.indexOf(r.source);if(n<0)return "";for(var t,i=r.historyRef.slice(n),o="",a=0;a<i.length;a++){var u=i[a];if(u===r.source)o=e,t=r.source;else if("string"==typeof u)o+="['"+u.replace(/'/gi,"\\'")+"']",t=t[u];else if(u!==t)return ""}return o+" = "+e+"; "}function typedArrayToString(e,r,n){var t=arrayToString(Array.from(e),r,n);return "new "+e.constructor.name+"("+t+")"}function setToString(e,r,n){var t=[];return e.forEach((function(e,i,o){t.push(stringifyRef(i,r,n));})),0===t.length?"new Set()":"new Set(["+t.join(", ")+"])"}function mapToString(e,r,n){var t=[];return e.forEach((function(e,i){t.push("["+stringifyRef(i,r,n)+", "+stringifyRef(e,r,n)+"]");})),0===t.length?"new Map()":"new Map(["+t.join(", ")+"])"}function objectToString(e,r,n){var t=[];for(var i in e)if(e.hasOwnProperty(i)){n.references.push(i);var o=stringifyRef(e[i],r,n);n.references.pop(),"undefined"!==o&&(/^[a-zA-Z]+$/.test(i)||(i='"'+i+'"'),t.push(i+": "+o));}return 0===t.length?"{}":attachActions(getLocalRefs(e),"{\n"+t.join(",\n")+"\n}")}function functionPropertiesToString(e,r,n,t){var i="";for(var o in r)if(r.hasOwnProperty(o)){t.references.push(o);var a=stringifyRef(r[o],n,t);t.references.pop(),"undefined"!==a&&(i+=e+"."+o+" = "+a+";\n");}return i}function functionToString(e,r,n){var t=e.name||"anonymousFunction",i=r.includeFunctionProperties?functionPropertiesToString(t,e,r,n):"";n.references.push("prototype");var o=r.includeFunctionPrototype?functionPropertiesToString(t+".prototype",e.prototype,r,n):"";n.references.pop();var a=String(e);if(a.indexOf("[native code]")>-1&&a.length<100)for(var u in nativeFunctions)nativeFunctions[u]===e&&(a=u);return i||o?attachActions(getLocalRefs(e),"(function(){\n var "+t+" = "+String(a)+";\n "+i+"\n "+o+"\n return "+t+";\n}())"):a}function arrayBufferToString(e,r,n){return r.includeBuffers?"("+typedArrayToString(new Int8Array(e),r,n)+").buffer":"undefined"}function dataViewToString(e,r,n){return r.includeBuffers?"new DataView("+arrayBufferToString(e.buffer,r,n)+", "+e.byteOffset+", "+e.byteLength+")":"undefined"}function stringify(e,r,n){switch(getInternalType(e)){case"undefined":case"promise":case"generator":return "undefined";case"null":return "null";case"boolean":case"regexp":return String(e);default:return JSON.stringify(e);case"number":return numberToString(e);case"bigint":return "BigInt("+e+")";case"symbol":return symbolToString(e);case"date":return dateToString(e);case"error":return errorToString(e);case"array":return arrayToString(e,r,n);case"typedarray":return typedArrayToString(e,r,n);case"set":return setToString(e,r,n);case"map":return mapToString(e,r,n);case"object":return objectToString(e,r,n);case"function":case"generatorfunction":return functionToString(e,r,n);case"arraybuffer":return arrayBufferToString(e,r,n);case"dataview":return dataViewToString(e,r,n)}}function stringifyRef(e,r,n){var t=n.references.indexOf(e);if(t<0||"string"==typeof n.references[t]){var i=getInternalType(e),o=n.references.length;switch(n.references.push(e),i){case"object":if(n.nestedObjectsLeft<=0)return "undefined";n.nestedObjectsLeft--;break;case"array":case"typedarray":if(n.nestedArraysLeft<=0)return "undefined";n.nestedArraysLeft--;break;case"function":case"generatorfunction":if(n.nestedFunctionsLeft<=0)return "undefined";n.nestedFunctionsLeft--;}var a=stringify(e,r,n);switch(n.references.splice(o),i){case"object":n.nestedObjectsLeft++;break;case"array":case"typedarray":n.nestedArraysLeft++;break;case"function":case"generatorfunction":n.nestedFunctionsLeft++;}return a}return refs.push({historyRef:n.references.slice(0),source:e}),"null"}function javaScriptToString(e,r){var n={includeFunctionProperties:void 0===(r=r||{}).includeFunctionProperties||r.includeFunctionProperties,includeFunctionPrototype:void 0===r.includeFunctionPrototype||r.includeFunctionPrototype,includeBuffers:void 0===r.includeBuffers||r.includeBuffers,nestedObjectsAmount:void 0===r.nestedObjectsAmount?Number.POSITIVE_INFINITY:r.nestedObjectsAmount,nestedArraysAmount:void 0===r.nestedArraysAmount?Number.POSITIVE_INFINITY:r.nestedArraysAmount,nestedFunctionsAmount:void 0===r.nestedFunctionsAmount?Number.POSITIVE_INFINITY:r.nestedFunctionsAmount};return stringify(e,n,{references:[e],nestedObjectsLeft:n.nestedObjectsAmount,nestedArraysLeft:n.nestedArraysAmount,nestedFunctionsLeft:n.nestedFunctionsAmount})}

    return javaScriptToString;

}));
//# sourceMappingURL=javascripttostring.umd.js.map
